<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lịch sử đơn hàng | CafeOnline</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body{
            background:#faf7f1;
            font-family: "Courier New", monospace;
            color:#3b362a;
        }

        h2{
            color:#3d4f37; /* xanh rêu Cộng */
            font-weight:800;
            font-size:28px;
            text-align:center;
            letter-spacing:2px;
            margin-bottom:20px;
        }

        /* ===== CARD ===== */
        .order-card{
            background:#ffffff;
            border-radius:18px;
            padding:28px;
            border:1px solid #e6dfd3;
            box-shadow:0 6px 20px rgba(0,0,0,0.12);
            transition:0.25s ease;
        }
        .order-card:hover{
            transform:translateY(-3px);
        }

        /* ===== TABLE ===== */
        table{
            overflow:hidden;
            border-radius:12px;
            background:white;
            border:1px solid #e3d8c8;
        }

        thead{
            background:#e8d7c4 !important;
            color:#4a362c !important;
            font-weight:700;
            font-size:15px;
        }

        tbody tr{
            background:#fdfbf7;
        }
        tbody tr:hover{
            background:#f0e7dd !important;
        }

        /* ===== STATUS ===== */
        .status{
            font-weight:700;
            padding:6px 12px;
            border-radius:8px;
            font-size:14px;
        }
        .status-pending{
            background:#ffefcf;
            color:#a66b00;
            border:1px solid #e8c887;
        }
        .status-completed{
            background:#e4f4e7;
            color:#2e7d32;
            border:1px solid #8cc499;
        }
        .status-cancelled{
            background:#fde3e3;
            color:#d32f2f;
            border:1px solid #e9b1b1;
        }

        /* ===== BUTTON ===== */
        .btn-coffee{
            background:#415738;
            color:white;
            font-weight:700;
            border-radius:10px;
            padding:7px 16px;
            transition:0.2s ease;
            letter-spacing:1px;
        }
        .btn-coffee:hover{
            background:#2e4129;
            color:white;
            transform:translateY(-2px);
        }

        /* Alert chưa có đơn */
        .alert-warning {
            background:#fff4d1;
            border:1px solid #e3c98b;
            color:#72540a;
            font-weight:600;
        }

    </style>

</head>

<body>

<!-- HEADER CAFEONLINE -->
<div th:replace="layout/header :: header"></div>

<div class="container mt-4 mb-5">

    <h2>LỊCH SỬ ĐƠN HÀNG</h2>

    <!-- CHƯA CÓ ĐƠN -->
    <div class="alert alert-warning mt-3"
         th:if="${orders == null or #lists.isEmpty(orders)}">
        Bạn chưa có đơn hàng nào.
        <a href="/" class="fw-bold">Mua hàng ngay</a>
    </div>

    <!-- CÓ ĐƠN -->
    <div class="order-card mt-3"
         th:if="${orders != null and !#lists.isEmpty(orders)}">

        <table class="table table-bordered align-middle">
            <thead>
            <tr>
                <th>Mã đơn</th>
                <th>Ngày đặt</th>
                <th>Tổng tiền</th>
                <th>Trạng thái</th>
                <th></th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="o : ${orders}">

                <td th:text="${o.id}"></td>

                <td th:text="${#temporals.format(o.orderDate, 'dd/MM/yyyy HH:mm')}"></td>

                <td class="text-danger fw-bold"
                    th:text="${#numbers.formatDecimal(o.total,0,'COMMA',0,'POINT')} + ' đ'">
                </td>

                <td class="status"
                    th:classappend="' status-' + ${o.status}">
                    <span th:text="${o.status}"></span>
                </td>

                <td>
                    <a th:href="@{/my-order-detail(id=${o.id})}"
                       class="btn btn-coffee btn-sm">
                        Xem chi tiết
                    </a>
                </td>

            </tr>
            </tbody>
        </table>

    </div>
</div>

<!-- FOOTER -->
<div th:replace="layout/footer :: footer"></div>

</body>
</html>
