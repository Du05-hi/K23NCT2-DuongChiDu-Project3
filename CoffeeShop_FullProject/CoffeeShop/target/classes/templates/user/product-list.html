<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Thực đơn | CafeOnline</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

    <style>

        body {
            background:#faf7f1;
            font-family:"Courier New", monospace;
        }

        /* ===== TIÊU ĐỀ ===== */
        .section-title {
            font-size:30px;
            font-weight:800;
            letter-spacing:3px;
            color:#2e2e2e;
            text-align:center;
            margin:30px 0 25px;
        }

        /* ===== MENU BÊN TRÁI ===== */
        .left-menu {
            width:100%;
            transition:0.3s ease;
        }

        .left-menu.fixed {
            position:fixed;
            top:100px;
            left:60px;
            width:220px;
            z-index:20;
        }

        .category-list {
            list-style:none;
            padding-left:0;
        }

        .category-list li {
            padding:10px 0;
            font-size:18px;
            cursor:pointer;
            color:#333;
            transition:0.2s ease;
        }

        .category-list li:hover {
            color:#415738;
            transform:translateX(5px);
        }

        .category-list a {
            text-decoration:none;
            color:inherit;
            font-weight:600;
        }

        /* ===== CARD SẢN PHẨM ===== */
        .product-card {
            background:white;
            padding:10px;
            border-radius:12px;
            border:1px solid #e6ddc8;
            box-shadow:0 4px 14px rgba(0,0,0,.12);
            transition:.2s ease;
        }

        .product-card:hover {
            transform:translateY(-6px);
            box-shadow:0 8px 18px rgba(0,0,0,.18);
        }

        .product-img {
            width:100%;
            height:300px;
            object-fit:cover;
            border-radius:10px;
        }

        .product-name {
            font-size:18px;
            font-weight:700;
            margin-top:10px;
            text-transform:uppercase;
            color:#111;
        }

        .product-price {
            font-size:17px;
            font-weight:900;
            color:#415738;
            margin-top:5px;
        }

        /* ===== BUTTON ĐỒNG BỘ ===== */
        .btn-detail {
            background:#415738;
            border:none;
            color:white;
            font-weight:bold;
            letter-spacing:1px;
            border-radius:10px;
            padding:8px 0;
            margin-top:6px;
        }

        .btn-detail:hover {
            background:#2f3f2b;
            color:white;
        }

    </style>
</head>

<body>

<!-- HEADER -->
<div th:replace="layout/header :: header"></div>

<div class="container mt-4">

    <h2 class="section-title">THỰC ĐƠN</h2>

    <div class="row">

        <!-- ===== DANH MỤC BÊN TRÁI ===== -->
        <div class="col-md-3">
            <div id="menuLeft" class="left-menu">

                <ul class="category-list">
                    <li th:each="c : ${categories}">
                        <a th:href="@{/products/category/{id}(id=${c.id})}"
                           th:text="${c.name}"></a>
                    </li>
                </ul>

            </div>
        </div>

        <!-- ===== DANH SÁCH SẢN PHẨM ===== -->
        <div class="col-md-9">

            <div class="row">

                <div class="col-md-4 mb-4" th:each="p : ${products}">
                    <div class="product-card">

                        <img class="product-img"
                             th:src="@{'/img/' + ${p.image}}">

                        <h5 class="product-name" th:text="${p.name}"></h5>

                        <p class="product-price"
                           th:text="${#numbers.formatDecimal(p.price,0,'COMMA',0,'POINT')} + ' đ'"></p>

                        <!-- Xem chi tiết -->
                        <a th:href="@{/product/{id}(id=${p.id})}"
                           class="btn btn-detail w-100">
                            XEM CHI TIẾT
                        </a>

                        <!-- Thêm vào giỏ hàng -->
                        <form th:action="@{/cart/add}" method="post" class="mt-2">
                            <input type="hidden" name="productId" th:value="${p.id}">
                            <input type="hidden" name="quantity" value="1">
                            <button class="btn btn-detail w-100">
                                THÊM VÀO GIỎ
                            </button>
                        </form>

                    </div>
                </div>

            </div>

        </div>

    </div>

</div>

<!-- FOOTER -->
<div th:replace="layout/footer :: footer"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    /* === MENU STICKY === */
    const menu = document.getElementById("menuLeft");

    window.addEventListener("scroll", function() {
        if (window.scrollY > 200) {
            menu.classList.add("fixed");
        } else {
            menu.classList.remove("fixed");
        }
    });
</script>

</body>
</html>
