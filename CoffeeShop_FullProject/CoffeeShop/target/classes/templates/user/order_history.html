<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>L·ªãch s·ª≠ ƒë·∫∑t h√†ng</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

    <style>

        body {
            background:#faf7f1;
            font-family:"Courier New", monospace;
            color:#3b362a;
        }

        h2 {
            font-size:28px;
            font-weight:800;
            text-align:center;
            color:#3d4f37;
            letter-spacing:2px;
            margin-bottom:25px;
        }

        /* ===== CARD ƒê∆†N H√ÄNG ===== */
        .order-card {
            background:white;
            padding:25px;
            border-radius:18px;
            border:1px solid #e6ddc8;
            box-shadow:0 6px 20px rgba(0,0,0,0.15);
            margin-bottom:22px;
            transition:0.25s;
        }
        .order-card:hover {
            transform:translateY(-3px);
        }

        .order-title {
            font-size:20px;
            font-weight:800;
            color:#4a362c;
        }

        /* ===== TR·∫†NG TH√ÅI ƒê∆†N H√ÄNG ===== */
        .badge-status {
            font-size:14px;
            padding:6px 10px;
            border-radius:10px;
            font-weight:700;
        }

        .status-PENDING {
            background:#ffefcf;
            color:#a66b00;
            border:1px solid #e8c887;
        }
        .status-COMPLETED {
            background:#e4f4e7;
            color:#2e7d32;
            border:1px solid #8cc499;
        }
        .status-CANCELLED {
            background:#fde3e3;
            color:#d32f2f;
            border:1px solid #e9b1b1;
        }

        /* ===== BUTTON ===== */
        .btn-detail {
            background:#415738;
            color:white;
            border-radius:12px;
            padding:7px 20px;
            font-weight:700;
            transition:0.2s ease;
            letter-spacing:1px;
        }

        .btn-detail:hover {
            background:#2e4129;
            color:white;
            transform:translateY(-2px);
        }

        /* ===== MESS CH∆ØA C√ì ƒê∆†N ===== */
        .no-order-box {
            padding:30px;
            border-radius:16px;
            background:white;
            box-shadow:0 6px 20px rgba(0,0,0,0.15);
            border:1px solid #e6ddc8;
        }

        /* ===== PH√ÇN TRANG ===== */
        .pagination .page-link {
            color:#415738;
            font-weight:700;
            border-radius:8px;
        }

        .pagination .active .page-link {
            background:#415738;
            border-color:#415738;
            color:white;
        }

    </style>
</head>

<body>

<div th:replace="layout/navbar :: navbar"></div>

<div class="container mt-4 mb-5">

    <h2>üì¶ L·ªäCH S·ª¨ ƒê·∫∂T H√ÄNG</h2>

    <!-- N·∫øu ch∆∞a c√≥ ƒë∆°n -->
    <div th:if="${#lists.isEmpty(orders)}" class="text-center no-order-box mt-4">
        <h4 class="text-secondary mb-3">B·∫°n ch∆∞a c√≥ ƒë∆°n h√†ng n√†o üò¢</h4>
        <a href="/products" class="btn-detail">Mua ngay</a>
    </div>

    <!-- Danh s√°ch ƒë∆°n h√†ng -->
    <div th:each="o : ${orders}" th:if="${not #lists.isEmpty(orders)}">

        <div class="order-card">

            <div class="d-flex justify-content-between align-items-center">

                <!-- TH√îNG TIN TR√ÅI -->
                <div>
                    <div class="order-title">
                        ƒê∆°n h√†ng #<span th:text="${o.id}"></span>
                    </div>

                    <div class="text-muted mt-1">
                        Ng√†y ƒë·∫∑t:
                        <span th:text="${#temporals.format(o.orderDate, 'dd/MM/yyyy HH:mm')}"></span>
                    </div>

                    <div class="mt-2">
                        <span class="badge-status"
                              th:classappend="' status-' + ${o.status}"
                              th:text="${o.status}">
                        </span>
                    </div>
                </div>

                <!-- T·ªîNG TI·ªÄN + N√öT -->
                <div class="text-end">
                    <div class="fw-bold text-danger" style="font-size:20px;"
                         th:text="${#numbers.formatDecimal(o.total,0,'COMMA',0,'POINT')} + ' ƒë'">
                    </div>

                    <a th:href="@{/orders/detail(id=${o.id})}"
                       class="btn-detail mt-2">
                        Xem chi ti·∫øt
                    </a>
                </div>

            </div>

        </div>

    </div>

    <!-- PH√ÇN TRANG -->
    <div class="d-flex justify-content-center mt-4" th:if="${totalPages > 1}">
        <nav>
            <ul class="pagination">

                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                    <a class="page-link"
                       th:href="@{/orders/history(page=${currentPage - 1})}">
                        ¬´
                    </a>
                </li>

                <li class="page-item"
                    th:each="i : ${#numbers.sequence(0, totalPages-1)}"
                    th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link"
                       th:text="${i + 1}"
                       th:href="@{/orders/history(page=${i})}"></a>
                </li>

                <li class="page-item"
                    th:classappend="${currentPage + 1 == totalPages} ? 'disabled'">
                    <a class="page-link"
                       th:href="@{/orders/history(page=${currentPage + 1})}">
                        ¬ª
                    </a>
                </li>

            </ul>
        </nav>
    </div>

</div>

</body>
</html>
