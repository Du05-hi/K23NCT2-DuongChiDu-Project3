<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Đặt hàng thành công | CoffeeShop</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>

    <style>
        body{
            background:#faf7f1;
            font-family:"Courier New", monospace;
        }
        .success-wrapper{
            max-width:780px;
            margin:50px auto;
        }
        .success-box{
            background:#ffffff;
            padding:38px;
            border-radius:22px;
            border:1px solid #e6ddc8;
            box-shadow:0 8px 25px rgba(0,0,0,.18);
            transition:.25s ease;
        }
        .success-box:hover{
            transform:translateY(-3px);
        }
        .check-icon{
            font-size:90px;
            color:#2e7d32;
            text-align:center;
            margin-bottom:15px;
            font-weight:bold;
        }
        h2{
            text-align:center;
            font-size:30px;
            font-weight:800;
            color:#3d4f37;
            letter-spacing:1px;
        }
        h5{
            color:#4e3d33;
            font-weight:700;
            margin-top:20px;
        }
        p,small{
            color:#3d372f;
        }
        hr{
            border-color:#e5d9c7;
        }
        .text-danger{
            font-weight:700;
        }
        .payment-info{
            background:#fffdf8;
            padding:18px;
            border-radius:14px;
            border:1px solid #e3d7c9;
            margin-top:24px;
            box-shadow:0 3px 10px rgba(0,0,0,.08);
        }
        .payment-info h5{
            font-size:18px;
            margin-bottom:12px;
            color:#3c2f28;
        }
        .btn-coffee{
            background:#415738;
            color:#fff;
            padding:12px 26px;
            font-weight:700;
            border-radius:12px;
            transition:.2s ease;
            letter-spacing:1px;
        }
        .btn-coffee:hover{
            background:#2e4129;
            transform:translateY(-2px);
            color:#fff;
        }
    </style>
</head>

<body>

<div th:replace="layout/header :: header"></div>

<div class="container success-wrapper">
    <div class="success-box">

        <div class="check-icon">✔</div>

        <h2>Đặt hàng thành công!</h2>

        <p class="text-center text-muted mt-2">
            Cảm ơn bạn đã mua hàng tại <strong>CoffeeShop</strong>.
        </p>

        <hr>

        <h5>Thông tin đơn hàng</h5>

        <p><b>Mã đơn:</b> <span th:text="${order.id}"></span></p>
        <p><b>Ngày đặt:</b>
            <span th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy HH:mm')}"></span>
        </p>
        <p><b>Khách hàng:</b> <span th:text="${order.customerName}"></span></p>
        <p><b>SĐT:</b> <span th:text="${order.phone}"></span></p>
        <p><b>Địa chỉ:</b> <span th:text="${order.address}"></span></p>

        <p class="mt-3"><b>Thanh toán:</b>
            <span th:if="${order.paymentMethod=='COD'}">Thanh toán khi nhận hàng</span>
            <span th:if="${order.paymentMethod=='BANK'}">Chuyển khoản ngân hàng</span>
            <span th:if="${order.paymentMethod=='MOMO'}">Ví MoMo</span>
            <span th:if="${order.paymentMethod=='VISA'}">Thẻ Visa</span>
        </p>

        <hr>

        <h5>Sản phẩm đã đặt</h5>

        <div th:each="d : ${order.orderDetails}">
            <div class="fw-bold" th:text="${d.product.name}"></div>
            <small class="text-muted">
                Size: <span th:text="${d.size}"></span> •
                Đường: <span th:text="${d.sugar}"></span> •
                Đá: <span th:text="${d.ice}"></span>
            </small>
            <div class="fw-bold text-danger"
                 th:text="${d.price} + ' đ'"></div>
            <hr>
        </div>

        <!-- ===== CHỈ SỬA CHỖ NÀY ===== -->
        <h4 class="text-end text-danger fw-bold">
            Tổng:
            <span th:text="${#numbers.formatDecimal(order.total,0,'COMMA',0,'POINT')}"></span> đ
        </h4>
        <!-- ========================== -->

        <!-- ===== BANK PAYMENT ===== -->
        <div class="payment-info" th:if="${order.paymentMethod=='BANK'}">
            <h5 class="fw-bold">Thông tin chuyển khoản ngân hàng</h5>
            <p><b>Chủ tài khoản:</b> DUONG CHI DU</p>
            <p><b>Ngân hàng:</b> MBBank</p>
            <p><b>Số tài khoản:</b> 307200588888</p>
            <p><b>Nội dung chuyển:</b> ThanhToanDon <span th:text="${order.id}"></span></p>
        </div>

        <!-- ===== MOMO PAYMENT ===== -->
        <div class="payment-info" th:if="${order.paymentMethod=='MOMO'}">
            <h5 class="fw-bold">Thanh toán ví MoMo</h5>
            <p><b>SĐT MoMo:</b> 0365184434</p>
            <p><b>Nội dung:</b> ThanhToanDon <span th:text="${order.id}"></span></p>
        </div>

        <!-- ===== VISA PAYMENT ===== -->
        <div class="payment-info" th:if="${order.paymentMethod=='VISA'}">
            <h5 class="fw-bold">Thanh toán thẻ Visa</h5>
            <p>Vui lòng nhập thông tin thẻ tại bước thanh toán.</p>
        </div>

        <div class="text-center mt-4">
            <a href="/" class="btn btn-coffee">Quay lại trang chủ</a>
        </div>

    </div>
</div>

<div th:replace="layout/footer :: footer"></div>

</body>
</html>
